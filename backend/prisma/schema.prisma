generator client {
  provider = "prisma-client-js"
  output = "../src/db/generated"
}

datasource db {
  provider = "postgresql"
}

enum MatchStatus {
  scheduled
  live
  finished
}

model Match {
  id        Int         @id @default(autoincrement())
  sport     String
  homeTeam  String      @map("home_team")
  awayTeam  String      @map("away_team")
  status    MatchStatus @default(scheduled)
  startTime DateTime?   @map("start_time")
  endTime   DateTime?   @map("end_time")
  homeScore Int         @default(0) @map("home_score")
  awayScore Int         @default(0) @map("away_score")
  createdAt DateTime    @default(now()) @map("created_at")

  commentry Commentary[]

  @@map("match")
}

model Commentary {
  id        Int      @id @default(autoincrement())
  matchId   Int      @map("match_id")
  minute    Int?
  sequence  Int?
  period    String?
  eventType String?  @map("event_type")
  actor     String?
  team      String?
  message   String
  metadata  Json?
  tags      String[]
  createdAt DateTime @default(now()) @map("created_at")

  match Match @relation(fields: [matchId], references: [id], onDelete: Cascade)

  @@map("commentary")
  @@index([matchId])
}
